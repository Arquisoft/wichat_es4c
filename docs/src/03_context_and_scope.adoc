ifndef::imagesdir[:imagesdir: ../images]

[[section-context-and-scope]]
== Context and Scope

=== Business Context

image::model.png[Business Context]  

[options="header",cols="1,2"]
|===
| Element | Description  
| _User_ | _The contestant who interacts with the application, can ask the integrated chatbot, and answer the displayed questions._  

| _WIChat_ | _Main web application where the game logic takes place._  

| _Wikidata_ | _Source from which the questions and answers will be extracted._  

| _LLM_API_ | _API integrating an LLM that will be used to dynamically generate hints and follow a conversational dialogue to help the contestant answer the questions without explicitly giving away the answer._  

| _Database_ | _Storage system that keeps relevant user information and past game sessions and also stores questions, there's a one instance for user related information and another one for questions ._  
|===


=== Technical Context  


==== Architecture Diagram

image::architecture-diagram.png[Architecture Diagram]  

==== **Technical Interface Explanation**

===== **Gateway**  
API that links the different parts of the application.  

===== **React Application**  
React provides the user with an interface to interact with, answer questions, and make requests to the backend.  

===== **User Database**  
Stores all information related to users, data, and game session history.  

===== **Authentication Service**  
Interface that communicates with the user database to verify whether a login attempt is valid.  

===== **User Service**  
Interface that communicates with the user database to query or update game-related information.  

===== **LLM Service**  
Service that processes hints using Gemini AI and returns responses to the user's questions via prompt engineering
on the code, so it only answers game-related questions.  

===== **Question Service**  
Service that processes information from Wikidata to generate questions and possible answers. 

===== **Question Database**  
Stores quiestions generated in the question service for later use in the game. 

===== **WikiData API**  
WikiData provides all question-related content, including images, answers, and the correct response.  

===== **Gemini AI**  
The LLM we are using for hints.  

==== Input/Output Channel Mapping  

[options="header",cols="1,2,2"]
|===
| Channel | Input | Output  
| React Application | HTTP requests from the user with actions | Response through the interface.  
| Gateway | REST requests from the web app to obtain question data (images, answers) or perform operations like login | Response with the requested information in each case.  
| User Service | Data queries to the database | Response to the query.  
| Authentication Service | User login data | Data verification query to check if the credentials are correct.  
| LLM Service | Prompt with the hints requested by the user | Hint generated by the model.  
| WikiData API | Request for question information | Response with the requested information.
| Question Service | A request from the game when it needs a question | Question and answers generated using the information retrieved from Wikidata API.  
| User Database | SQL instructions for queries or insertions | Query results or confirmation of insertions.  
| Question Database | Fully generated questions from question service | The questions when the game needs them.
| Prometheus | Gateway metrics | Metrics stored in its database.  
| Grafana | Metrics organized in Prometheus | Visualization of metrics.  
|===
